<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ø MN90 Mobile Planner</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: linear-gradient(135deg, #0f1419 0%, #1a2332 100%); overflow-x: hidden; color: #a8dadc; }
        .page-title { background: linear-gradient(135deg, #0f3d44 0%, #1a2332 100%); color: #a8dadc; padding: 20px; text-align: center; font-size: 20px; font-weight: bold; box-shadow: 0 4px 12px rgba(0,0,0,0.6); border-bottom: 2px solid #2d8b8b; }
        .container { display: flex; flex-direction: column; gap: 12px; padding: 12px; height: calc(100vh - 80px); overflow-y: auto; background: linear-gradient(135deg, #0f1419 0%, #151e2b 100%); }
        .tab-buttons { display: flex; gap: 8px; background: rgba(26, 35, 50, 0.8); padding: 12px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.4); border: 1px solid #2d8b8b; backdrop-filter: blur(10px); }
        .tab-btn { flex: 1; padding: 12px; background: rgba(45, 139, 139, 0.1); border: 1px solid #2d8b8b; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; color: #a8dadc; }
        .tab-btn:hover { background: rgba(45, 139, 139, 0.2); }
        .tab-btn.active { background: linear-gradient(135deg, #2d8b8b 0%, #1f5d5d 100%); color: #f1faee; border-color: #45b5b5; box-shadow: 0 0 12px rgba(45, 139, 139, 0.5); }
        .workspace { display: none; flex: 1; overflow: hidden; flex-direction: column; }
        .workspace.active { display: flex; }
        .workspace-inner { display: flex; flex-direction: column; height: 100%; overflow: hidden; }
        .top-row { display: flex; flex: 1; overflow: hidden; gap: 8px; }
        .menu-left { display: flex; flex-direction: column; min-width: 280px; background: rgba(26, 35, 50, 0.9); border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.5); overflow: hidden; border: 1px solid #2d8b8b; }
        .menu-sections { display: flex; flex-direction: column; height: 100%; overflow-y: auto; }
        .menu-section { padding: 14px; background: rgba(15, 20, 25, 0.6); margin: 6px; border-radius: 6px; border: 1px solid rgba(45, 139, 139, 0.3); flex-shrink: 0; overflow-y: auto; max-height: none; display: flex; flex-direction: column; flex: 1; }
        .menu-section-header { font-weight: 700; color: #2d8b8b; margin-bottom: 10px; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; }
        .input-group { margin: 8px 0; }
        .input-label { display: flex; justify-content: space-between; align-items: center; font-size: 10px; margin-bottom: 6px; font-weight: 600; color: #a8dadc; }
        input[type="range"] { width: 100%; height: 8px; border-radius: 4px; background: rgba(45, 139, 139, 0.2); outline: none; -webkit-appearance: none; cursor: pointer; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 18px; height: 18px; border-radius: 50%; background: linear-gradient(135deg, #00d4d4 0%, #2d8b8b 100%); cursor: pointer; box-shadow: 0 0 8px rgba(0, 212, 212, 0.6); }
        input[type="range"]::-moz-range-thumb { width: 18px; height: 18px; border-radius: 50%; background: linear-gradient(135deg, #00d4d4 0%, #2d8b8b 100%); cursor: pointer; border: none; box-shadow: 0 0 8px rgba(0, 212, 212, 0.6); }
        input[type="checkbox"] { width: 16px; height: 16px; cursor: pointer; accent-color: #00d4d4; }
        input[type="checkbox"] + label { cursor: pointer; user-select: none; color: #a8dadc; }
        .result-card { display: inline-block; }
        .gas-result { padding: 12px; border-radius: 6px; text-align: center; font-size: 10px; min-width: 120px; }
        .gas-result.air { background: rgba(0, 212, 212, 0.1); border-left: 4px solid #00d4d4; color: #a8dadc; }
        .gas-result.nitrox { background: rgba(45, 139, 139, 0.1); border-left: 4px solid #2d8b8b; color: #a8dadc; }
        .gas-result.trimix { background: rgba(168, 218, 220, 0.05); border-left: 4px solid #a8dadc; color: #a8dadc; }
        
        .center-right { display: flex; flex-direction: column; flex: 1; overflow: hidden; gap: 8px; }
        .graph-zone { background: rgba(15, 20, 25, 0.8); border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.5); overflow: auto; height: 100%; position: relative; border: 1px solid rgba(45, 139, 139, 0.3); }
        table { width: 100%; border-collapse: collapse; font-size: 9px; margin-top: 0; flex: 1; overflow-y: auto; background: rgba(26, 35, 50, 0.6); }
        table th { background: linear-gradient(135deg, #0f3d44 0%, #1a2332 100%); color: #a8dadc; padding: 8px; text-align: center; font-weight: 700; position: sticky; top: 0; border-bottom: 2px solid #2d8b8b; }
        table td { padding: 6px; border-bottom: 1px solid rgba(45, 139, 139, 0.2); text-align: center; color: #a8dadc; }
        table tbody tr:nth-child(even) { background: rgba(45, 139, 139, 0.05); }
        table tbody tr.highlight { background: rgba(0, 212, 212, 0.3) !important; font-weight: 700; border: 2px solid #00d4d4 !important; box-shadow: 0 0 8px rgba(0, 212, 212, 0.4) !important; }
        .results-zone { padding: 16px; background: rgba(26, 35, 50, 0.8); overflow-y: auto; flex-shrink: 0; min-height: 160px; display: flex; gap: 12px; border-top: 1px solid rgba(45, 139, 139, 0.3); }
        .results-zone.horizontal { flex-direction: row; overflow-x: auto; }
        .results-zone.vertical { flex-direction: column; }
        .result-box { padding: 12px; background: rgba(15, 20, 25, 0.8); border-radius: 6px; border-left: 4px solid #00d4d4; flex-shrink: 0; min-width: 180px; box-shadow: 0 2px 8px rgba(0, 212, 212, 0.2); }
        .result-box-title { font-weight: 700; color: #2d8b8b; font-size: 11px; margin-bottom: 6px; }
        .result-value { font-size: 18px; font-weight: 700; color: #00d4d4; }
        .result-value.success { color: #2d8b8b; }
        .result-value.warning { color: #ff6b6b; }
        .result-detail { font-size: 9px; color: #a8dadc; margin-top: 6px; line-height: 1.4; }
        .resizer-menu-v { width: 6px; background: rgba(45, 139, 139, 0.5); cursor: col-resize; }
        
        /* Scrollbar styling */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: rgba(45, 139, 139, 0.1); }
        ::-webkit-scrollbar-thumb { background: rgba(45, 139, 139, 0.5); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(45, 139, 139, 0.8); }
        
        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .container { padding: 8px; gap: 6px; }
            .tab-btn { padding: 10px; font-size: 12px; }
            .top-row { flex-direction: column; }
            .menu-left { min-width: 100%; max-width: 100%; max-height: 40%; }
            .center-right { min-width: 100%; max-width: 100%; height: auto; }
            .graph-zone { height: 180px; }
            #graph0-zone { height: 120px; }
            #graph1-zone { height: 160px; }
            .menu-section { padding: 8px; margin: 4px; }
            .input-group { margin: 4px 0; }
            table { font-size: 8px; }
            table td, table th { padding: 4px; }
            .result-box { width: 48%; margin: 4px; }
        }
        
        @media (max-width: 480px) {
            .container { padding: 4px; gap: 4px; }
            .tab-btn { padding: 8px; font-size: 10px; }
            .menu-left { max-height: 35%; }
            .graph-zone { height: 140px; }
            #graph0-zone { height: 100px; }
            #graph1-zone { height: 120px; }
            .menu-section { padding: 6px; margin: 2px; }
            table { font-size: 7px; }
            table td, table th { padding: 3px; }
            .result-box { width: 100%; margin: 2px 0; }
        }
    </style>
</head>
<body>
    <div class="page-title">ü§ø MN90 Mobile Planner</div>
    
    <div class="container">
        <div class="tab-buttons">
            <button class="tab-btn active" onclick="switchTab(0)">üìã Planificateur</button>
            <button class="tab-btn" onclick="switchTab(1)">üí® Autonomie</button>
            <button class="tab-btn" onclick="switchTab(2)">üìä Tables</button>
        </div>
        
        <!-- TAB 0: PLANIFICATEUR -->
        <div id="workspace0" class="workspace active">
            <div class="workspace-inner">
                <div class="top-row">
                    <div class="menu-left">
                        <div class="menu-sections">
                            <div class="menu-section" style="flex: 0 0 auto; max-height: none;">
                                <div class="menu-section-header">Param√®tres</div>
                                <div class="input-group">
                                    <div class="input-label"><span>Profondeur</span><span id="depth0-info">20 m</span></div>
                                    <input type="range" id="depth0" min="6" max="65" value="20" oninput="updateVal('depth0', ' m'); calculateTab0()">
                                </div>
                                <div class="input-group">
                                    <div class="input-label"><span>Temps au fond</span><span id="time0-val">20 min</span></div>
                                    <input type="range" id="time0" min="1" max="300" value="20" oninput="updateVal('time0', ' min'); calculateTab0()">
                                </div>
                            </div>
                            <div class="menu-section">
                                <div class="menu-section-header">M√©lange</div>
                                <div class="input-group">
                                    <div class="input-label"><span>AIR</span></div>
                                </div>
                                <div class="input-group" style="margin-bottom: 12px;">
                                    <div class="result-card"><div class="gas-result air">
                                        <strong>ü´Å AIR</strong><br>PPO‚ÇÇ: <strong id="ppo2-air">0.42</strong> bar
                                    </div></div>
                                </div>
                                <div class="input-group">
                                    <input type="checkbox" id="show-nitrox" onchange="calculateTab0()"> 
                                    <label style="font-size: 10px; margin-left: 4px;">NITROX</label>
                                </div>
                                <div class="input-group">
                                    <div class="input-label"><span>% O‚ÇÇ</span><span id="nitrox-val">32</span></div>
                                    <input type="range" id="nitrox-o2" min="32" max="50" value="32" oninput="updateVal('nitrox-o2', ''); calculateTab0()" style="display: none;">
                                </div>
                                <div class="input-group" style="display: none;">
                                    <div class="result-card"><div class="gas-result nitrox">
                                        <strong>üü¢ NITROX</strong><br>PPO‚ÇÇ: <strong id="ppo2-nitrox">0.84</strong> bar
                                    </div></div>
                                </div>
                                <div class="input-group" style="margin-top: 12px;">
                                    <input type="checkbox" id="show-trimix" onchange="calculateTab0()"> 
                                    <label style="font-size: 10px; margin-left: 4px;">TRIMIX</label>
                                </div>
                                <div class="input-group" style="display: none;">
                                    <div class="input-label"><span>% O‚ÇÇ</span><span>18</span> <span>% He</span><span>35</span></div>
                                </div>
                                <div class="input-group" style="display: none;">
                                    <div class="result-card"><div class="gas-result trimix">
                                        <strong>üåÄ TRIMIX</strong><br>PPO‚ÇÇ: <strong id="ppo2-trimix">0.54</strong> bar
                                    </div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="resizer-menu-v"></div>
                    <div class="center-right">
                        <div class="graph-zone" id="graph0-zone" style="background: #1a3a52;"><canvas id="chart0"></canvas></div>
                        <div class="results-zone" id="results0"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- TAB 1: AUTONOMIE -->
        <div id="workspace1" class="workspace">
            <div class="workspace-inner">
                <div class="top-row">
                    <div class="menu-left">
                        <div class="menu-sections">
                            <div class="menu-section" style="flex: 0 0 auto; max-height: none;">
                                <div class="menu-section-header">Param√®tres</div>
                                <div class="input-group">
                                    <div class="input-label"><span>Profondeur</span><span id="depth1-info">20 m</span></div>
                                    <input type="range" id="depth1" min="6" max="65" value="20" oninput="updateVal('depth1', ' m'); calculateTab1()">
                                </div>
                                <div class="input-group">
                                    <div class="input-label"><span>Descente</span><span id="desc-time-val">1 min</span></div>
                                    <input type="range" id="desc-time" min="1" max="15" value="1" oninput="updateVal('desc-time', ' min'); calculateTab1()">
                                </div>
                                <div class="input-group">
                                    <div class="input-label"><span>Temps au fond</span><span id="time1-val">20 min</span></div>
                                    <input type="range" id="time1" min="1" max="300" value="20" oninput="updateVal('time1', ' min'); calculateTab1()">
                                </div>
                                <div class="input-group">
                                    <div class="input-label"><span>Volume (L)</span><span id="vol1-val">12 L</span></div>
                                    <input type="range" id="vol1" min="6" max="18" value="12" oninput="updateVal('vol1', ' L'); calculateTab1()">
                                </div>
                                <div class="input-group">
                                    <div class="input-label"><span>Pression initiale</span><span id="press1-val">210 bar</span></div>
                                    <input type="range" id="press1" min="100" max="300" value="210" oninput="updateVal('press1', ' bar'); calculateTab1()">
                                </div>
                                <div class="input-group">
                                    <div class="input-label"><span>Pression s√©cu</span><span id="safety1-val">50 bar</span></div>
                                    <input type="range" id="safety1" min="20" max="100" value="50" oninput="updateVal('safety1', ' bar'); calculateTab1()">
                                </div>
                                <div class="input-group">
                                    <div class="input-label"><span>Consommation</span><span id="conso1-val">0.2 L/min</span></div>
                                    <input type="range" id="conso1" min="0.1" max="1" value="0.2" step="0.1" oninput="updateVal('conso1', ' L/min'); calculateTab1()">
                                </div>
                            </div>
                            <div class="menu-section">
                                <div class="menu-section-header">Paliers MN90</div>
                                <div id="paliers-info" style="font-size: 10px; line-height: 1.6; color: #2c3e50;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="resizer-menu-v"></div>
                    <div class="center-right">
                        <div class="graph-zone" id="graph1-zone" style="background: white;"><canvas id="chart1"></canvas></div>
                        <div class="results-zone horizontal" id="results1"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- TAB 2: TABLES -->
        <div id="workspace2" class="workspace">
            <div class="workspace-inner">
                <div class="top-row">
                    <div class="menu-left">
                        <div class="menu-sections">
                            <div class="menu-section" style="flex: 0 0 auto; max-height: none;">
                                <div class="menu-section-header">Recherche</div>
                                <div class="input-group">
                                    <div class="input-label"><span>Profondeur</span><span id="table-depth-val">20 m</span></div>
                                    <input type="range" id="table-depth" min="6" max="65" value="20" oninput="updateVal('table-depth', ' m'); drawTableGraph()">
                                </div>
                                <div class="input-group">
                                    <div class="input-label"><span>Temps au fond</span><span id="table-time-val">00:20:00</span></div>
                                    <input type="range" id="table-time" min="1" max="300" value="20" oninput="updateVal('table-time', ''); drawTableGraph()">
                                </div>
                            </div>
                            
                            <div class="menu-section" style="flex: 1; overflow-y: auto;">
                                <div class="menu-section-header">Tableau MN90</div>
                                <table>
                                    <thead><tr style="background: #2c3e50; color: white;">
                                        <th style="font-size: 8px;">Prof</th><th style="font-size: 8px;">Temps</th><th style="font-size: 8px;">15m</th><th style="font-size: 8px;">12m</th><th style="font-size: 8px;">9m</th><th style="font-size: 8px;">6m</th><th style="font-size: 8px;">3m</th><th style="font-size: 8px;">Groupe</th>
                                    </tr></thead>
                                    <tbody id="table-rows"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <div class="resizer-menu-v"></div>
                    <div class="center-right">
                        <div class="graph-zone" id="graph2-zone" style="background: white;"><canvas id="chart2"></canvas></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const mn90Tables = [
{prof:6,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'A'},
{prof:6,time:30.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'B'},
{prof:6,time:45.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'C'},
{prof:6,time:75.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:6,time:105.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'E'},
{prof:6,time:135.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'F'},
{prof:6,time:180.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'G'},
{prof:6,time:240.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'H'},
{prof:6,time:315.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'I'},
{prof:6,time:360.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'J'},
{prof:8,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'B'},
{prof:8,time:30.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'C'},
{prof:8,time:45.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:8,time:60.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'E'},
{prof:8,time:90.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'F'},
{prof:8,time:105.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'G'},
{prof:8,time:135.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'H'},
{prof:8,time:165.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'I'},
{prof:8,time:195.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'J'},
{prof:8,time:255.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'K'},
{prof:8,time:300.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'L'},
{prof:8,time:360.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'M'},
{prof:10,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'B'},
{prof:10,time:30.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'C'},
{prof:10,time:45.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:10,time:60.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'F'},
{prof:10,time:75.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'G'},
{prof:10,time:105.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'H'},
{prof:10,time:120.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'I'},
{prof:10,time:135.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'J'},
{prof:10,time:165.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'K'},
{prof:10,time:180.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'L'},
{prof:10,time:240.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'M'},
{prof:10,time:255.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'N'},
{prof:10,time:315.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'O'},
{prof:10,time:330.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'P'},
{prof:10,time:360.00,p15:0,p12:0,p9:0,p6:0,p3:1,gps:'P'},
{prof:12,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'A'},
{prof:12,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'B'},
{prof:12,time:25.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'C'},
{prof:12,time:35.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:12,time:45.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'E'},
{prof:12,time:55.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'F'},
{prof:12,time:65.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'G'},
{prof:12,time:80.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'H'},
{prof:12,time:90.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'I'},
{prof:12,time:105.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'J'},
{prof:12,time:120.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'K'},
{prof:12,time:135.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'L'},
{prof:12,time:140.00,p15:0,p12:0,p9:0,p6:0,p3:2,gps:'L'},
{prof:12,time:150.00,p15:0,p12:0,p9:0,p6:0,p3:4,gps:'M'},
{prof:12,time:160.00,p15:0,p12:0,p9:0,p6:0,p3:6,gps:'M'},
{prof:12,time:170.00,p15:0,p12:0,p9:0,p6:0,p3:7,gps:'N'},
{prof:12,time:180.00,p15:0,p12:0,p9:0,p6:0,p3:9,gps:'N'},
{prof:12,time:190.00,p15:0,p12:0,p9:0,p6:0,p3:11,gps:'N'},
{prof:12,time:200.00,p15:0,p12:0,p9:0,p6:0,p3:13,gps:'O'},
{prof:12,time:210.00,p15:0,p12:0,p9:0,p6:0,p3:14,gps:'O'},
{prof:12,time:220.00,p15:0,p12:0,p9:0,p6:0,p3:15,gps:'O'},
{prof:12,time:230.00,p15:0,p12:0,p9:0,p6:0,p3:16,gps:'O'},
{prof:12,time:240.00,p15:0,p12:0,p9:0,p6:0,p3:17,gps:'O'},
{prof:12,time:250.00,p15:0,p12:0,p9:0,p6:0,p3:18,gps:'P'},
{prof:12,time:255.00,p15:0,p12:0,p9:0,p6:0,p3:19,gps:'P'},
{prof:12,time:270.00,p15:0,p12:0,p9:0,p6:0,p3:22,gps:'P'},
{prof:12,time:285.00,p15:0,p12:0,p9:0,p6:0,p3:24,gps:'P'},
{prof:12,time:300.00,p15:0,p12:0,p9:0,p6:0,p3:26,gps:'P'},
{prof:12,time:315.00,p15:0,p12:0,p9:0,p6:0,p3:27,gps:'*'},
{prof:12,time:330.00,p15:0,p12:0,p9:0,p6:0,p3:29,gps:'*'},
{prof:12,time:345.00,p15:0,p12:0,p9:0,p6:0,p3:31,gps:'*'},
{prof:12,time:360.00,p15:0,p12:0,p9:0,p6:0,p3:33,gps:'*'},
{prof:15,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'A'},
{prof:15,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'B'},
{prof:15,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'C'},
{prof:15,time:20.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'C'},
{prof:15,time:25.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:15,time:30.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'E'},
{prof:15,time:35.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'E'},
{prof:15,time:40.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'F'},
{prof:15,time:45.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'G'},
{prof:15,time:50.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'G'},
{prof:15,time:55.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'H'},
{prof:15,time:60.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'H'},
{prof:15,time:65.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'I'},
{prof:15,time:70.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'I'},
{prof:15,time:75.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'J'},
{prof:15,time:80.00,p15:0,p12:0,p9:0,p6:0,p3:2,gps:'J'},
{prof:15,time:85.00,p15:0,p12:0,p9:0,p6:0,p3:4,gps:'K'},
{prof:15,time:90.00,p15:0,p12:0,p9:0,p6:0,p3:6,gps:'K'},
{prof:15,time:95.00,p15:0,p12:0,p9:0,p6:0,p3:8,gps:'L'},
{prof:15,time:100.00,p15:0,p12:0,p9:0,p6:0,p3:11,gps:'L'},
{prof:15,time:105.00,p15:0,p12:0,p9:0,p6:0,p3:13,gps:'L'},
{prof:15,time:110.00,p15:0,p12:0,p9:0,p6:0,p3:15,gps:'M'},
{prof:15,time:115.00,p15:0,p12:0,p9:0,p6:0,p3:17,gps:'M'},
{prof:15,time:120.00,p15:0,p12:0,p9:0,p6:0,p3:18,gps:'M'},
{prof:15,time:130.00,p15:0,p12:0,p9:0,p6:0,p3:22,gps:'*'},
{prof:15,time:140.00,p15:0,p12:0,p9:0,p6:0,p3:25,gps:'*'},
{prof:18,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'B'},
{prof:18,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'B'},
{prof:18,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'C'},
{prof:18,time:20.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:18,time:25.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'E'},
{prof:18,time:30.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'F'},
{prof:18,time:35.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'F'},
{prof:18,time:40.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'G'},
{prof:18,time:45.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'H'},
{prof:18,time:50.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'H'},
{prof:18,time:55.00,p15:0,p12:0,p9:0,p6:0,p3:1,gps:'I'},
{prof:18,time:60.00,p15:0,p12:0,p9:0,p6:0,p3:5,gps:'J'},
{prof:18,time:65.00,p15:0,p12:0,p9:0,p6:0,p3:8,gps:'J'},
{prof:18,time:70.00,p15:0,p12:0,p9:0,p6:0,p3:11,gps:'K'},
{prof:18,time:75.00,p15:0,p12:0,p9:0,p6:0,p3:14,gps:'K'},
{prof:18,time:80.00,p15:0,p12:0,p9:0,p6:0,p3:17,gps:'L'},
{prof:18,time:85.00,p15:0,p12:0,p9:0,p6:0,p3:21,gps:'L'},
{prof:18,time:90.00,p15:0,p12:0,p9:0,p6:0,p3:23,gps:'M'},
{prof:18,time:95.00,p15:0,p12:0,p9:0,p6:0,p3:26,gps:'M'},
{prof:18,time:100.00,p15:0,p12:0,p9:0,p6:0,p3:28,gps:'M'},
{prof:18,time:105.00,p15:0,p12:0,p9:0,p6:0,p3:31,gps:'N'},
{prof:18,time:110.00,p15:0,p12:0,p9:0,p6:0,p3:34,gps:'N'},
{prof:18,time:115.00,p15:0,p12:0,p9:0,p6:0,p3:36,gps:'N'},
{prof:18,time:120.00,p15:0,p12:0,p9:0,p6:0,p3:38,gps:'O'},
{prof:18,time:130.00,p15:0,p12:0,p9:0,p6:0,p3:42,gps:'*'},
{prof:18,time:140.00,p15:0,p12:0,p9:0,p6:0,p3:46,gps:'*'},
{prof:18,time:150.00,p15:0,p12:0,p9:0,p6:0,p3:51,gps:'*'},
{prof:20,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'B'},
{prof:20,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'B'},
{prof:20,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:20,time:20.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:20,time:25.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'E'},
{prof:20,time:30.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'F'},
{prof:20,time:35.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'G'},
{prof:20,time:40.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'H'},
{prof:20,time:45.00,p15:0,p12:0,p9:0,p6:0,p3:1,gps:'I'},
{prof:20,time:50.00,p15:0,p12:0,p9:0,p6:0,p3:4,gps:'I'},
{prof:20,time:55.00,p15:0,p12:0,p9:0,p6:0,p3:9,gps:'J'},
{prof:20,time:60.00,p15:0,p12:0,p9:0,p6:0,p3:13,gps:'K'},
{prof:20,time:65.00,p15:0,p12:0,p9:0,p6:0,p3:16,gps:'K'},
{prof:20,time:70.00,p15:0,p12:0,p9:0,p6:0,p3:20,gps:'L'},
{prof:20,time:75.00,p15:0,p12:0,p9:0,p6:0,p3:24,gps:'L'},
{prof:20,time:80.00,p15:0,p12:0,p9:0,p6:0,p3:27,gps:'M'},
{prof:20,time:85.00,p15:0,p12:0,p9:0,p6:0,p3:30,gps:'M'},
{prof:20,time:90.00,p15:0,p12:0,p9:0,p6:0,p3:34,gps:'M'},
{prof:20,time:95.00,p15:0,p12:0,p9:0,p6:0,p3:37,gps:'*'},
{prof:20,time:100.00,p15:0,p12:0,p9:0,p6:0,p3:40,gps:'*'},
{prof:20,time:105.00,p15:0,p12:0,p9:0,p6:0,p3:43,gps:'*'},
{prof:20,time:110.00,p15:0,p12:0,p9:0,p6:0,p3:45,gps:'*'},
{prof:20,time:115.00,p15:0,p12:0,p9:0,p6:0,p3:48,gps:'*'},
{prof:20,time:120.00,p15:0,p12:0,p9:0,p6:1,p3:49,gps:'*'},
{prof:22,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'B'},
{prof:22,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'C'},
{prof:22,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:22,time:20.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'E'},
{prof:22,time:25.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'F'},
{prof:22,time:30.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'G'},
{prof:22,time:35.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'H'},
{prof:22,time:40.00,p15:0,p12:0,p9:0,p6:0,p3:2,gps:'I'},
{prof:22,time:45.00,p15:0,p12:0,p9:0,p6:0,p3:7,gps:'I'},
{prof:22,time:50.00,p15:0,p12:0,p9:0,p6:0,p3:12,gps:'J'},
{prof:22,time:55.00,p15:0,p12:0,p9:0,p6:0,p3:16,gps:'K'},
{prof:22,time:60.00,p15:0,p12:0,p9:0,p6:0,p3:20,gps:'K'},
{prof:22,time:65.00,p15:0,p12:0,p9:0,p6:0,p3:25,gps:'L'},
{prof:22,time:70.00,p15:0,p12:0,p9:0,p6:0,p3:29,gps:'L'},
{prof:22,time:75.00,p15:0,p12:0,p9:0,p6:0,p3:33,gps:'M'},
{prof:22,time:80.00,p15:0,p12:0,p9:0,p6:0,p3:37,gps:'M'},
{prof:22,time:85.00,p15:0,p12:0,p9:0,p6:0,p3:41,gps:'N'},
{prof:22,time:90.00,p15:0,p12:0,p9:0,p6:0,p3:44,gps:'N'},
{prof:22,time:95.00,p15:0,p12:0,p9:0,p6:2,p3:46,gps:'*'},
{prof:22,time:100.00,p15:0,p12:0,p9:0,p6:4,p3:47,gps:'*'},
{prof:22,time:105.00,p15:0,p12:0,p9:0,p6:5,p3:49,gps:'*'},
{prof:22,time:110.00,p15:0,p12:0,p9:0,p6:7,p3:51,gps:'*'},
{prof:22,time:115.00,p15:0,p12:0,p9:0,p6:9,p3:53,gps:'*'},
{prof:22,time:120.00,p15:0,p12:0,p9:0,p6:11,p3:55,gps:'*'},
{prof:25,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'B'},
{prof:25,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'C'},
{prof:25,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:25,time:20.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'E'},
{prof:25,time:25.00,p15:0,p12:0,p9:0,p6:0,p3:1,gps:'F'},
{prof:25,time:30.00,p15:0,p12:0,p9:0,p6:0,p3:2,gps:'H'},
{prof:25,time:35.00,p15:0,p12:0,p9:0,p6:0,p3:5,gps:'I'},
{prof:25,time:40.00,p15:0,p12:0,p9:0,p6:0,p3:10,gps:'J'},
{prof:25,time:45.00,p15:0,p12:0,p9:0,p6:0,p3:16,gps:'J'},
{prof:25,time:50.00,p15:0,p12:0,p9:0,p6:0,p3:21,gps:'K'},
{prof:25,time:55.00,p15:0,p12:0,p9:0,p6:0,p3:27,gps:'L'},
{prof:25,time:60.00,p15:0,p12:0,p9:0,p6:0,p3:32,gps:'L'},
{prof:25,time:65.00,p15:0,p12:0,p9:0,p6:0,p3:37,gps:'M'},
{prof:25,time:70.00,p15:0,p12:0,p9:0,p6:1,p3:41,gps:'M'},
{prof:25,time:75.00,p15:0,p12:0,p9:0,p6:4,p3:43,gps:'N'},
{prof:25,time:80.00,p15:0,p12:0,p9:0,p6:7,p3:45,gps:'N'},
{prof:25,time:85.00,p15:0,p12:0,p9:0,p6:9,p3:48,gps:'O'},
{prof:25,time:90.00,p15:0,p12:0,p9:0,p6:11,p3:50,gps:'O'},
{prof:25,time:95.00,p15:0,p12:0,p9:0,p6:14,p3:51,gps:'*'},
{prof:25,time:100.00,p15:0,p12:0,p9:0,p6:16,p3:54,gps:'*'},
{prof:25,time:105.00,p15:0,p12:0,p9:0,p6:19,p3:56,gps:'*'},
{prof:25,time:110.00,p15:0,p12:0,p9:0,p6:21,p3:59,gps:'*'},
{prof:25,time:115.00,p15:0,p12:0,p9:0,p6:23,p3:61,gps:'*'},
{prof:25,time:120.00,p15:0,p12:0,p9:0,p6:24,p3:63,gps:'*'},
{prof:28,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'B'},
{prof:28,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:28,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'E'},
{prof:28,time:20.00,p15:0,p12:0,p9:0,p6:0,p3:1,gps:'F'},
{prof:28,time:25.00,p15:0,p12:0,p9:0,p6:0,p3:2,gps:'G'},
{prof:28,time:30.00,p15:0,p12:0,p9:0,p6:0,p3:6,gps:'H'},
{prof:28,time:35.00,p15:0,p12:0,p9:0,p6:0,p3:12,gps:'I'},
{prof:28,time:40.00,p15:0,p12:0,p9:0,p6:0,p3:19,gps:'J'},
{prof:28,time:45.00,p15:0,p12:0,p9:0,p6:0,p3:25,gps:'K'},
{prof:28,time:50.00,p15:0,p12:0,p9:0,p6:0,p3:32,gps:'L'},
{prof:28,time:55.00,p15:0,p12:0,p9:0,p6:2,p3:36,gps:'M'},
{prof:28,time:60.00,p15:0,p12:0,p9:0,p6:4,p3:40,gps:'M'},
{prof:28,time:65.00,p15:0,p12:0,p9:0,p6:8,p3:43,gps:'N'},
{prof:28,time:70.00,p15:0,p12:0,p9:0,p6:11,p3:46,gps:'N'},
{prof:28,time:75.00,p15:0,p12:0,p9:0,p6:14,p3:48,gps:'O'},
{prof:28,time:80.00,p15:0,p12:0,p9:0,p6:17,p3:50,gps:'O'},
{prof:28,time:85.00,p15:0,p12:0,p9:0,p6:20,p3:53,gps:'O'},
{prof:28,time:90.00,p15:0,p12:0,p9:0,p6:23,p3:56,gps:'P'},
{prof:28,time:95.00,p15:0,p12:0,p9:0,p6:26,p3:58,gps:'*'},
{prof:28,time:100.00,p15:0,p12:0,p9:0,p6:28,p3:61,gps:'*'},
{prof:28,time:105.00,p15:0,p12:0,p9:0,p6:30,p3:64,gps:'*'},
{prof:28,time:110.00,p15:0,p12:0,p9:1,p6:32,p3:67,gps:'*'},
{prof:28,time:115.00,p15:0,p12:0,p9:2,p6:34,p3:70,gps:'*'},
{prof:28,time:120.00,p15:0,p12:0,p9:3,p6:36,p3:73,gps:'*'},
{prof:30,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'B'},
{prof:30,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:30,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:1,gps:'E'},
{prof:30,time:20.00,p15:0,p12:0,p9:0,p6:0,p3:2,gps:'F'},
{prof:30,time:25.00,p15:0,p12:0,p9:0,p6:0,p3:4,gps:'H'},
{prof:30,time:30.00,p15:0,p12:0,p9:0,p6:0,p3:9,gps:'I'},
{prof:30,time:35.00,p15:0,p12:0,p9:0,p6:0,p3:17,gps:'J'},
{prof:30,time:40.00,p15:0,p12:0,p9:0,p6:0,p3:24,gps:'K'},
{prof:30,time:45.00,p15:0,p12:0,p9:0,p6:1,p3:31,gps:'L'},
{prof:30,time:50.00,p15:0,p12:0,p9:0,p6:3,p3:36,gps:'M'},
{prof:30,time:55.00,p15:0,p12:0,p9:0,p6:6,p3:39,gps:'M'},
{prof:30,time:60.00,p15:0,p12:0,p9:0,p6:10,p3:43,gps:'N'},
{prof:30,time:65.00,p15:0,p12:0,p9:0,p6:14,p3:46,gps:'N'},
{prof:30,time:70.00,p15:0,p12:0,p9:0,p6:17,p3:48,gps:'O'},
{prof:30,time:75.00,p15:0,p12:0,p9:0,p6:20,p3:50,gps:'*'},
{prof:30,time:80.00,p15:0,p12:0,p9:0,p6:24,p3:54,gps:'*'},
{prof:30,time:85.00,p15:0,p12:0,p9:0,p6:27,p3:57,gps:'*'},
{prof:30,time:90.00,p15:0,p12:0,p9:0,p6:30,p3:60,gps:'*'},
{prof:32,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'B'},
{prof:32,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:32,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:1,gps:'E'},
{prof:32,time:20.00,p15:0,p12:0,p9:0,p6:0,p3:3,gps:'G'},
{prof:32,time:25.00,p15:0,p12:0,p9:0,p6:0,p3:6,gps:'H'},
{prof:32,time:30.00,p15:0,p12:0,p9:0,p6:0,p3:14,gps:'I'},
{prof:32,time:35.00,p15:0,p12:0,p9:0,p6:0,p3:22,gps:'K'},
{prof:32,time:40.00,p15:0,p12:0,p9:0,p6:1,p3:29,gps:'K'},
{prof:32,time:45.00,p15:0,p12:0,p9:0,p6:4,p3:34,gps:'L'},
{prof:32,time:50.00,p15:0,p12:0,p9:0,p6:7,p3:39,gps:'M'},
{prof:32,time:55.00,p15:0,p12:0,p9:0,p6:11,p3:43,gps:'N'},
{prof:32,time:60.00,p15:0,p12:0,p9:0,p6:15,p3:46,gps:'N'},
{prof:32,time:65.00,p15:0,p12:0,p9:0,p6:19,p3:48,gps:'O'},
{prof:32,time:70.00,p15:0,p12:0,p9:0,p6:23,p3:50,gps:'O'},
{prof:32,time:75.00,p15:0,p12:0,p9:0,p6:27,p3:54,gps:'*'},
{prof:32,time:80.00,p15:0,p12:0,p9:2,p6:29,p3:58,gps:'*'},
{prof:32,time:85.00,p15:0,p12:0,p9:4,p6:30,p3:61,gps:'*'},
{prof:32,time:90.00,p15:0,p12:0,p9:6,p6:32,p3:64,gps:'*'},
{prof:35,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'C'},
{prof:35,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:35,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:2,gps:'F'},
{prof:35,time:20.00,p15:0,p12:0,p9:0,p6:0,p3:5,gps:'H'},
{prof:35,time:25.00,p15:0,p12:0,p9:0,p6:0,p3:11,gps:'I'},
{prof:35,time:30.00,p15:0,p12:0,p9:0,p6:1,p3:20,gps:'J'},
{prof:35,time:35.00,p15:0,p12:0,p9:0,p6:2,p3:27,gps:'K'},
{prof:35,time:40.00,p15:0,p12:0,p9:0,p6:5,p3:34,gps:'L'},
{prof:35,time:45.00,p15:0,p12:0,p9:0,p6:9,p3:39,gps:'M'},
{prof:35,time:50.00,p15:0,p12:0,p9:0,p6:14,p3:43,gps:'N'},
{prof:35,time:55.00,p15:0,p12:0,p9:0,p6:18,p3:47,gps:'N'},
{prof:35,time:60.00,p15:0,p12:0,p9:0,p6:22,p3:50,gps:'O'},
{prof:35,time:65.00,p15:0,p12:0,p9:2,p6:26,p3:52,gps:'*'},
{prof:35,time:70.00,p15:0,p12:0,p9:4,p6:28,p3:57,gps:'*'},
{prof:35,time:75.00,p15:0,p12:0,p9:7,p6:30,p3:60,gps:'*'},
{prof:35,time:80.00,p15:0,p12:0,p9:10,p6:31,p3:64,gps:'*'},
{prof:35,time:85.00,p15:0,p12:0,p9:12,p6:33,p3:69,gps:'*'},
{prof:35,time:90.00,p15:0,p12:0,p9:14,p6:36,p3:72,gps:'*'},
{prof:38,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'C'},
{prof:38,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:1,gps:'E'},
{prof:38,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:4,gps:'F'},
{prof:38,time:20.00,p15:0,p12:0,p9:0,p6:0,p3:8,gps:'H'},
{prof:38,time:25.00,p15:0,p12:0,p9:0,p6:1,p3:16,gps:'J'},
{prof:38,time:30.00,p15:0,p12:0,p9:0,p6:3,p3:24,gps:'K'},
{prof:38,time:35.00,p15:0,p12:0,p9:0,p6:5,p3:33,gps:'L'},
{prof:38,time:40.00,p15:0,p12:0,p9:0,p6:10,p3:38,gps:'M'},
{prof:38,time:45.00,p15:0,p12:0,p9:0,p6:15,p3:43,gps:'N'},
{prof:38,time:50.00,p15:0,p12:0,p9:0,p6:20,p3:47,gps:'N'},
{prof:38,time:55.00,p15:0,p12:0,p9:2,p6:23,p3:50,gps:'O'},
{prof:38,time:60.00,p15:0,p12:0,p9:5,p6:27,p3:53,gps:'P'},
{prof:38,time:65.00,p15:0,p12:0,p9:8,p6:29,p3:58,gps:'*'},
{prof:38,time:70.00,p15:0,p12:0,p9:11,p6:31,p3:62,gps:'*'},
{prof:38,time:75.00,p15:0,p12:0,p9:14,p6:33,p3:66,gps:'*'},
{prof:38,time:80.00,p15:0,p12:0,p9:17,p6:35,p3:71,gps:'*'},
{prof:38,time:85.00,p15:0,p12:0,p9:20,p6:36,p3:76,gps:'*'},
{prof:38,time:90.00,p15:0,p12:0,p9:23,p6:38,p3:81,gps:'*'},
{prof:40,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'C'},
{prof:40,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:2,gps:'E'},
{prof:40,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:4,gps:'G'},
{prof:40,time:20.00,p15:0,p12:0,p9:0,p6:1,p3:9,gps:'H'},
{prof:40,time:25.00,p15:0,p12:0,p9:0,p6:2,p3:19,gps:'J'},
{prof:40,time:30.00,p15:0,p12:0,p9:0,p6:4,p3:28,gps:'K'},
{prof:40,time:35.00,p15:0,p12:0,p9:0,p6:8,p3:35,gps:'L'},
{prof:40,time:40.00,p15:0,p12:0,p9:0,p6:13,p3:40,gps:'M'},
{prof:40,time:45.00,p15:0,p12:0,p9:1,p6:18,p3:45,gps:'N'},
{prof:40,time:50.00,p15:0,p12:0,p9:2,p6:23,p3:48,gps:'O'},
{prof:40,time:55.00,p15:0,p12:0,p9:5,p6:26,p3:52,gps:'O'},
{prof:40,time:60.00,p15:0,p12:0,p9:8,p6:29,p3:57,gps:'P'},
{prof:40,time:65.00,p15:0,p12:0,p9:12,p6:31,p3:61,gps:'*'},
{prof:40,time:70.00,p15:0,p12:0,p9:15,p6:33,p3:66,gps:'*'},
{prof:40,time:75.00,p15:0,p12:0,p9:18,p6:35,p3:71,gps:'*'},
{prof:40,time:80.00,p15:0,p12:1,p9:21,p6:37,p3:75,gps:'*'},
{prof:40,time:85.00,p15:0,p12:3,p9:23,p6:38,p3:82,gps:'*'},
{prof:40,time:90.00,p15:0,p12:5,p9:24,p6:39,p3:88,gps:'*'},
{prof:42,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'C'},
{prof:42,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:2,gps:'E'},
{prof:42,time:15.00,p15:0,p12:0,p9:0,p6:0,p3:5,gps:'G'},
{prof:42,time:20.00,p15:0,p12:0,p9:0,p6:1,p3:12,gps:'I'},
{prof:42,time:25.00,p15:0,p12:0,p9:0,p6:3,p3:22,gps:'J'},
{prof:42,time:30.00,p15:0,p12:0,p9:0,p6:6,p3:31,gps:'L'},
{prof:42,time:35.00,p15:0,p12:0,p9:0,p6:11,p3:37,gps:'M'},
{prof:42,time:40.00,p15:0,p12:0,p9:1,p6:16,p3:43,gps:'N'},
{prof:42,time:45.00,p15:0,p12:0,p9:3,p6:21,p3:47,gps:'*'},
{prof:42,time:50.00,p15:0,p12:0,p9:6,p6:24,p3:50,gps:'*'},
{prof:42,time:55.00,p15:0,p12:0,p9:8,p6:29,p3:55,gps:'*'},
{prof:42,time:60.00,p15:0,p12:0,p9:13,p6:30,p3:60,gps:'*'},
{prof:45,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'C'},
{prof:45,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:3,gps:'F'},
{prof:45,time:15.00,p15:0,p12:0,p9:0,p6:1,p3:6,gps:'H'},
{prof:45,time:20.00,p15:0,p12:0,p9:0,p6:3,p3:15,gps:'I'},
{prof:45,time:25.00,p15:0,p12:0,p9:0,p6:5,p3:25,gps:'K'},
{prof:45,time:30.00,p15:0,p12:0,p9:0,p6:9,p3:35,gps:'L'},
{prof:45,time:35.00,p15:0,p12:0,p9:1,p6:15,p3:40,gps:'M'},
{prof:45,time:40.00,p15:0,p12:0,p9:3,p6:20,p3:46,gps:'N'},
{prof:45,time:45.00,p15:0,p12:0,p9:6,p6:24,p3:50,gps:'*'},
{prof:45,time:50.00,p15:0,p12:0,p9:10,p6:28,p3:54,gps:'*'},
{prof:45,time:55.00,p15:0,p12:0,p9:14,p6:30,p3:60,gps:'*'},
{prof:45,time:60.00,p15:0,p12:1,p9:18,p6:32,p3:65,gps:'*'},
{prof:48,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:0,gps:'D'},
{prof:48,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:4,gps:'F'},
{prof:48,time:15.00,p15:0,p12:0,p9:0,p6:2,p3:7,gps:'H'},
{prof:48,time:20.00,p15:0,p12:0,p9:0,p6:4,p3:19,gps:'J'},
{prof:48,time:25.00,p15:0,p12:0,p9:0,p6:7,p3:30,gps:'K'},
{prof:48,time:30.00,p15:0,p12:0,p9:1,p6:12,p3:37,gps:'M'},
{prof:48,time:35.00,p15:0,p12:0,p9:3,p6:18,p3:44,gps:'N'},
{prof:48,time:40.00,p15:0,p12:0,p9:6,p6:23,p3:48,gps:'O'},
{prof:48,time:45.00,p15:0,p12:0,p9:10,p6:27,p3:53,gps:'*'},
{prof:48,time:50.00,p15:0,p12:1,p9:14,p6:30,p3:59,gps:'*'},
{prof:48,time:55.00,p15:0,p12:2,p9:18,p6:32,p3:64,gps:'*'},
{prof:48,time:60.00,p15:0,p12:5,p9:19,p6:36,p3:70,gps:'*'},
{prof:50,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:1,gps:'D'},
{prof:50,time:10.00,p15:0,p12:0,p9:0,p6:0,p3:4,gps:'F'},
{prof:50,time:15.00,p15:0,p12:0,p9:0,p6:2,p3:9,gps:'H'},
{prof:50,time:20.00,p15:0,p12:0,p9:0,p6:4,p3:22,gps:'J'},
{prof:50,time:25.00,p15:0,p12:0,p9:1,p6:8,p3:32,gps:'L'},
{prof:50,time:30.00,p15:0,p12:0,p9:2,p6:14,p3:39,gps:'M'},
{prof:50,time:35.00,p15:0,p12:0,p9:5,p6:20,p3:45,gps:'N'},
{prof:50,time:40.00,p15:0,p12:0,p9:9,p6:24,p3:50,gps:'O'},
{prof:50,time:45.00,p15:0,p12:1,p9:12,p6:29,p3:55,gps:'*'},
{prof:50,time:50.00,p15:0,p12:2,p9:17,p6:30,p3:62,gps:'*'},
{prof:50,time:55.00,p15:0,p12:5,p9:19,p6:34,p3:67,gps:'*'},
{prof:50,time:60.00,p15:0,p12:8,p9:21,p6:37,p3:74,gps:'*'},
{prof:52,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:1,gps:'D'},
{prof:52,time:10.00,p15:0,p12:0,p9:0,p6:1,p3:4,gps:'G'},
{prof:52,time:15.00,p15:0,p12:0,p9:0,p6:3,p3:10,gps:'I'},
{prof:52,time:20.00,p15:0,p12:0,p9:1,p6:5,p3:23,gps:'K'},
{prof:52,time:25.00,p15:0,p12:0,p9:2,p6:9,p3:34,gps:'M'},
{prof:52,time:30.00,p15:0,p12:0,p9:4,p6:15,p3:41,gps:'N'},
{prof:52,time:35.00,p15:0,p12:0,p9:6,p6:22,p3:47,gps:'O'},
{prof:52,time:40.00,p15:0,p12:1,p9:10,p6:26,p3:52,gps:'P'},
{prof:52,time:45.00,p15:0,p12:2,p9:15,p6:29,p3:59,gps:'*'},
{prof:52,time:50.00,p15:0,p12:5,p9:17,p6:32,p3:64,gps:'*'},
{prof:52,time:55.00,p15:0,p12:8,p9:19,p6:36,p3:71,gps:'*'},
{prof:52,time:60.00,p15:0,p12:11,p9:22,p6:38,p3:78,gps:'*'},
{prof:55,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:1,gps:'D'},
{prof:55,time:10.00,p15:0,p12:0,p9:0,p6:1,p3:5,gps:'G'},
{prof:55,time:15.00,p15:0,p12:0,p9:0,p6:4,p3:13,gps:'I'},
{prof:55,time:20.00,p15:0,p12:0,p9:1,p6:6,p3:27,gps:'K'},
{prof:55,time:25.00,p15:0,p12:0,p9:3,p6:11,p3:37,gps:'M'},
{prof:55,time:30.00,p15:0,p12:0,p9:6,p6:18,p3:44,gps:'N'},
{prof:55,time:35.00,p15:0,p12:1,p9:9,p6:23,p3:50,gps:'O'},
{prof:55,time:40.00,p15:0,p12:3,p9:12,p6:29,p3:55,gps:'P'},
{prof:55,time:45.00,p15:0,p12:5,p9:17,p6:31,p3:62,gps:'*'},
{prof:55,time:50.00,p15:0,p12:8,p9:19,p6:35,p3:69,gps:'*'},
{prof:55,time:55.00,p15:0,p12:12,p9:22,p6:37,p3:76,gps:'*'},
{prof:55,time:60.00,p15:2,p12:14,p9:24,p6:39,p3:86,gps:'*'},
{prof:58,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:2,gps:'D'},
{prof:58,time:10.00,p15:0,p12:0,p9:0,p6:2,p3:5,gps:'G'},
{prof:58,time:15.00,p15:0,p12:0,p9:1,p6:4,p3:16,gps:'J'},
{prof:58,time:20.00,p15:0,p12:0,p9:2,p6:7,p3:30,gps:'K'},
{prof:58,time:25.00,p15:0,p12:0,p9:4,p6:13,p3:40,gps:'M'},
{prof:58,time:30.00,p15:0,p12:1,p9:7,p6:21,p3:46,gps:'N'},
{prof:58,time:35.00,p15:0,p12:2,p9:11,p6:26,p3:52,gps:'O'},
{prof:58,time:40.00,p15:0,p12:5,p9:15,p6:30,p3:59,gps:'P'},
{prof:58,time:45.00,p15:0,p12:8,p9:18,p6:33,p3:66,gps:'*'},
{prof:58,time:50.00,p15:1,p12:11,p9:21,p6:37,p3:74,gps:'*'},
{prof:58,time:55.00,p15:3,p12:14,p9:23,p6:39,p3:83,gps:'*'},
{prof:58,time:60.00,p15:5,p12:16,p9:25,p6:42,p3:92,gps:'*'},
{prof:60,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:2,gps:'D'},
{prof:60,time:10.00,p15:0,p12:0,p9:0,p6:2,p3:6,gps:'G'},
{prof:60,time:15.00,p15:0,p12:0,p9:1,p6:4,p3:19,gps:'J'},
{prof:60,time:20.00,p15:0,p12:0,p9:3,p6:8,p3:32,gps:'L'},
{prof:60,time:25.00,p15:0,p12:0,p9:5,p6:15,p3:41,gps:'M'},
{prof:60,time:30.00,p15:0,p12:1,p9:8,p6:22,p3:48,gps:'O'},
{prof:60,time:35.00,p15:0,p12:4,p9:11,p6:28,p3:54,gps:'P'},
{prof:60,time:40.00,p15:0,p12:6,p9:17,p6:30,p3:62,gps:'P'},
{prof:60,time:45.00,p15:1,p12:9,p9:19,p6:35,p3:69,gps:'*'},
{prof:60,time:50.00,p15:2,p12:13,p9:22,p6:37,p3:78,gps:'*'},
{prof:60,time:55.00,p15:5,p12:15,p9:24,p6:40,p3:88,gps:'*'},
{prof:60,time:60.00,p15:7,p12:17,p9:26,p6:44,p3:96,gps:'*'},
{prof:62,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:2,gps:'*'},
{prof:62,time:10.00,p15:0,p12:0,p9:0,p6:2,p3:7,gps:'*'},
{prof:62,time:15.00,p15:0,p12:0,p9:1,p6:5,p3:21,gps:'*'},
{prof:65,time:5.00,p15:0,p12:0,p9:0,p6:0,p3:3,gps:'*'},
{prof:65,time:10.00,p15:0,p12:0,p9:0,p6:3,p3:8,gps:'*'},
{prof:65,time:15.00,p15:0,p12:0,p9:2,p6:5,p3:24,gps:'*'},
        ];
        const colors = ['#00d4d4', '#00b8d4', '#009ccc', '#0080c4', '#0066bc', '#45b5b5', '#2d8b8b', '#1f5d5d', '#00d4d4', '#00c4c4', '#00b0b0', '#008a8a', '#006464', '#004a4a'];
        let charts = {};
        
        function formatTime(minutes) {
            const totalSeconds = Math.round(minutes * 60);
            const hh = String(Math.floor(totalSeconds / 3600)).padStart(2, '0');
            const mm = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, '0');
            const ss = String(totalSeconds % 60).padStart(2, '0');
            return `${hh}:${mm}:${ss}`;
        }
        
        function updateVal(id, unit) {
            const elem = document.getElementById(id);
            const valElem = document.getElementById(id + '-val');
            if (valElem) {
                if (id === 'table-time') {
                    valElem.textContent = formatTime(parseFloat(elem.value));
                } else if (id === 'table-depth') {
                    valElem.textContent = elem.value + unit;
                } else {
                    valElem.textContent = elem.value + unit;
                }
            }
            if (id === 'depth0') document.getElementById('depth0-info').textContent = elem.value + 'm';
        }
        
        function getTableDepth(depth) {
            const depths = [6, 8, 10, 12, 15, 18, 20, 22, 25, 28, 30, 32, 35, 38, 40, 42, 45, 48, 50, 52, 55, 58, 60, 62, 65];
            return depths.reduce((prev, curr) => (Math.abs(curr - depth) < Math.abs(prev - depth) ? curr : prev));
        }
        
        function findBestRow(tableDepth, time) {
            let best = mn90Tables.find(r => r.prof === tableDepth);
            for (let r of mn90Tables.filter(r => r.prof === tableDepth)) {
                if (r.time <= time && (!best || r.time > best.time)) best = r;
            }
            return best || mn90Tables[0];
        }
        
        function calculateTab0() {
            const depth = parseInt(document.getElementById('depth0').value);
            const time = parseInt(document.getElementById('time0').value);
            const nitroxO2 = parseInt(document.getElementById('nitrox-o2').value) || 32;
            const trimixO2 = 18;
            const absPress = 1 + depth / 10;
            
            const ppo2Air = (21 / 100) * absPress;
            document.getElementById('ppo2-air').textContent = ppo2Air.toFixed(2);
            
            // Afficher/cacher NITROX
            const showNitrox = document.getElementById('show-nitrox').checked;
            document.getElementById('nitrox-o2').parentElement.style.display = showNitrox ? 'block' : 'none';
            document.getElementById('nitrox-o2').parentElement.nextElementSibling.style.display = showNitrox ? 'block' : 'none';
            
            if (showNitrox) {
                const ppo2Nitrox = (nitroxO2 / 100) * absPress;
                document.getElementById('ppo2-nitrox').textContent = ppo2Nitrox.toFixed(2);
            }
            
            // Afficher/cacher TRIMIX
            const showTrimix = document.getElementById('show-trimix').checked;
            document.getElementById('show-trimix').parentElement.nextElementSibling.style.display = showTrimix ? 'block' : 'none';
            document.getElementById('show-trimix').parentElement.nextElementSibling.nextElementSibling.style.display = showTrimix ? 'block' : 'none';
            
            if (showTrimix) {
                const ppo2Trimix = (trimixO2 / 100) * absPress;
                document.getElementById('ppo2-trimix').textContent = ppo2Trimix.toFixed(2);
            }
            
            let html = '';
            
            html += `<div class="result-card"><div class="gas-result air">
                <strong>ü´Å AIR</strong><br>21% O‚ÇÇ<br>
                PPO‚ÇÇ: <strong>${ppo2Air.toFixed(2)}</strong> bar
            </div></div>`;
            
            if (showNitrox) {
                html += `<div class="result-card"><div class="gas-result nitrox">
                    <strong>üü¢ NITROX</strong><br>${nitroxO2}% O‚ÇÇ<br>
                    PPO‚ÇÇ: <strong>${((nitroxO2 / 100) * absPress).toFixed(2)}</strong> bar
                </div></div>`;
            }
            
            if (showTrimix) {
                html += `<div class="result-card"><div class="gas-result trimix">
                    <strong>üåÄ TRIMIX</strong><br>18% O‚ÇÇ | 35% He | 47% N‚ÇÇ<br>
                    PPO‚ÇÇ: <strong>${((trimixO2 / 100) * absPress).toFixed(2)}</strong> bar
                </div></div>`;
            }
            
            const timeBottom = parseInt(document.getElementById('time0').value);
            const descTime = Math.ceil(depth / 15);
            const remountTime = Math.ceil(depth / 6);
            const totalTime = descTime + timeBottom + remountTime;
            
            html += `
                <div style="background: #f0f8ff; border-left: 4px solid #3498db; padding: 12px; border-radius: 4px; font-size: 10px; line-height: 1.7; width: 100%; margin-top: 10px;">
                    <strong>üìã Profil estim√© √† ${depth}m</strong><br>
                    Descente: ~${descTime}' | Fond: ${timeBottom}' | Remont√©e: ~${remountTime}'<br>
                    <strong>Temps total: ~${totalTime} min</strong>
                </div>
            `;
            
            document.getElementById('results0').innerHTML = html;
            drawDiveProfile(depth, timeBottom, nitroxO2, trimixO2, absPress);
        }
        
        function drawDiveProfile(depth, time, nitroxO2, trimixO2, absPress) {
            const canvas = document.getElementById('chart0');
            const ctx = canvas.getContext('2d');
            if (charts[0]) charts[0].destroy();
            
            const desc = depth / 15;
            const remount = depth / 6;
            const totalTime = desc + time + remount;
            
            let timePoints = [0];
            let depthPoints = [0];
            
            for (let i = 1; i <= 5; i++) {
                const pct = i / 5;
                timePoints.push(pct * desc);
                depthPoints.push(pct * depth);
            }
            
            timePoints.push(desc + time);
            depthPoints.push(depth);
            
            for (let i = 1; i <= 5; i++) {
                const pct = i / 5;
                timePoints.push(desc + time + pct * remount);
                depthPoints.push(depth - pct * depth);
            }
            
            charts[0] = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Profondeur',
                        data: depthPoints.map((d, i) => ({x: timePoints[i], y: d})),
                        borderColor: '#00d4d4',
                        backgroundColor: 'rgba(0, 212, 212, 0.1)',
                        borderWidth: 3,
                        tension: 0,
                        fill: true,
                        pointRadius: 5,
                        pointBackgroundColor: '#00d4d4',
                        pointBorderColor: '#a8dadc',
                        pointBorderWidth: 2,
                        showLine: true
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: true, position: 'right', labels: { color: '#a8dadc', font: {size: 11} } } },
                    scales: {
                        y: { reverse: true, max: depth + 5, min: -depth * 0.1, ticks: {color: '#a8dadc'}, grid: {color: 'rgba(45, 139, 139, 0.2)'} },
                        x: { min: 0, max: Math.ceil(totalTime), ticks: {color: '#a8dadc'}, grid: {color: 'rgba(45, 139, 139, 0.2)'}, title: {display: true, text: 'Temps (min)', color: '#a8dadc'} }
                    }
                }
            });
        }
        
        function calculateTab1() {
            const depthMax = parseInt(document.getElementById('depth1').value);
            const tableDepth = getTableDepth(depthMax);
            const timeBottom = parseInt(document.getElementById('time1').value);
            const row = findBestRow(tableDepth, timeBottom);
            
            let paliersHTML = '';
            if (row.p15 > 0 || row.p12 > 0 || row.p9 > 0 || row.p6 > 0 || row.p3 > 0) {
                paliersHTML += 'üìã <strong>Paliers:</strong><br>';
                if (row.p15 > 0) paliersHTML += `‚Ä¢ 15m: ${row.p15}min<br>`;
                if (row.p12 > 0) paliersHTML += `‚Ä¢ 12m: ${row.p12}min<br>`;
                if (row.p9 > 0) paliersHTML += `‚Ä¢ 9m: ${row.p9}min<br>`;
                if (row.p6 > 0) paliersHTML += `‚Ä¢ 6m: ${row.p6}min<br>`;
                if (row.p3 > 0) paliersHTML += `‚Ä¢ 3m: ${row.p3}min<br>`;
            } else {
                paliersHTML += '‚úÖ Aucun palier';
            }
            document.getElementById('paliers-info').innerHTML = paliersHTML;
            
            const vol = parseInt(document.getElementById('vol1').value);
            const pressInit = parseInt(document.getElementById('press1').value);
            const pressSafety = parseInt(document.getElementById('safety1').value);
            const conso = parseFloat(document.getElementById('conso1').value);
            const descTime = parseInt(document.getElementById('desc-time').value);
            const remountTime = Math.ceil(depthMax / 6);
            
            let pressLoss = 0;
            const avgPressDescent = 1 + depthMax / 20;
            pressLoss += conso * avgPressDescent * descTime / vol;
            
            const pressFond = 1 + depthMax / 10;
            pressLoss += conso * pressFond * timeBottom / vol;
            
            const avgPressRemount = (pressFond + 1.6) / 2;
            pressLoss += conso * avgPressRemount * remountTime / vol;
            
            if (row.p15 > 0) pressLoss += conso * 2.5 * row.p15 / vol;
            if (row.p12 > 0) pressLoss += conso * 2.2 * row.p12 / vol;
            if (row.p9 > 0) pressLoss += conso * 1.9 * row.p9 / vol;
            if (row.p6 > 0) pressLoss += conso * 1.6 * row.p6 / vol;
            if (row.p3 > 0) pressLoss += conso * 1.3 * row.p3 / vol;
            
            const finalPress = pressInit - pressLoss;
            
            let resultsHTML = `
                <div class="result-box">
                    <div class="result-box-title">ü´Å Pression r√©elle</div>
                    <div class="result-value ${finalPress < pressSafety ? 'warning' : 'success'}">${finalPress.toFixed(1)} bar</div>
                    <div class="result-detail">Temps fond: ${timeBottom}'<br>Groupe: ${row.gps}</div>
                </div>
            `;
            
            const totalTime = descTime + timeBottom + remountTime;
            const pressAtDescent = pressFond;
            const palierText = row.p15 > 0 || row.p12 > 0 || row.p9 > 0 || row.p6 > 0 || row.p3 > 0 
                ? `Paliers: ${row.p15 > 0 ? `15m x${row.p15}' ` : ''}${row.p12 > 0 ? `12m x${row.p12}' ` : ''}${row.p9 > 0 ? `9m x${row.p9}' ` : ''}${row.p6 > 0 ? `6m x${row.p6}' ` : ''}${row.p3 > 0 ? `3m x${row.p3}'` : ''}`
                : 'Aucun palier';
            
            resultsHTML += `
                <div style="background: #f0f8ff; border-left: 4px solid #3498db; padding: 12px; border-radius: 4px; font-size: 11px; line-height: 1.8; width: 100%; margin-top: 10px;">
                    <strong>üìã Profil de plong√©e</strong><br>
                    üöÄ Je plonge √† <strong>${depthMax}m</strong> ‚Äì √Ä la descente, je serai √† <strong>${pressAtDescent.toFixed(1)} bar</strong><br>
                    ‚è±Ô∏è Je reste au fond pendant <strong>${timeBottom}'</strong> ‚Äì Je serai √† <strong>${pressFond.toFixed(1)} bar</strong><br>
                    üì§ √Ä la remont√©e : <strong>${palierText}</strong><br>
                    ‚úÖ Je sors avec <strong>${finalPress.toFixed(1)} bar</strong> (s√©curit√©: ${pressSafety} bar)<br>
                    ‚è≥ <strong>Temps total: ${Math.round(totalTime)} min</strong>
                </div>
            `;
            
            document.getElementById('results1').innerHTML = resultsHTML;
            calculateTab1Graph(depthMax, timeBottom, pressFond, pressInit, pressSafety, row);
        }
        
        function calculateTab1Graph(depthMax, timeBottom, pressFond, pressInit, pressSafety, row) {
            const canvas = document.getElementById('chart1');
            const ctx = canvas.getContext('2d');
            if (charts[1]) charts[1].destroy();
            
            const descTime = Math.ceil(depthMax / 15);
            const remountTime = Math.ceil(depthMax / 6);
            
            let times = [0, descTime, descTime + timeBottom, descTime + timeBottom + remountTime];
            let depths = [0, depthMax, depthMax, 0];
            let pressures = [pressInit, pressFond, pressFond, pressSafety];
            
            const maxTime = Math.max(...times) + 5;
            
            const depthDataset = {
                label: 'Profondeur',
                data: depths.map((d, i) => ({x: times[i], y: d})),
                borderColor: '#00d4d4',
                backgroundColor: 'rgba(0, 212, 212, 0.15)',
                borderWidth: 2.5,
                tension: 0,
                fill: true,
                yAxisID: 'y',
                pointRadius: 4,
                pointBackgroundColor: '#00d4d4',
                showLine: true
            };
            
            const pressureDataset = {
                label: 'Pression',
                data: pressures.map((p, i) => ({x: times[i], y: p})),
                borderColor: '#ff8a80',
                backgroundColor: 'transparent',
                borderWidth: 2.5,
                tension: 0,
                yAxisID: 'y1',
                pointRadius: 4,
                pointBackgroundColor: '#ff8a80',
                showLine: true
            };
            
            const safetyPressureDataset = {
                label: `Pression de s√©curit√© (${pressSafety} bar)`,
                data: [
                    {x: 0, y: pressSafety},
                    {x: maxTime, y: pressSafety}
                ],
                borderColor: '#ff8a80',
                backgroundColor: 'transparent',
                borderWidth: 2,
                borderDash: [2, 2],
                tension: 0,
                yAxisID: 'y1',
                pointRadius: 0,
                showLine: true
            };
            
            charts[1] = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [depthDataset, pressureDataset, safetyPressureDataset]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: true, position: 'right', labels: { font: {size: 10} } } },
                    scales: {
                        y: { position: 'left', reverse: true, max: depthMax + 5, min: -depthMax * 0.1, title: {display: true, text: 'Profondeur (m)', font: {weight: 'bold'}} },
                        y1: { position: 'right', min: 0, max: pressSafety + 20, title: {display: true, text: 'Pression (bar)', font: {weight: 'bold'}}, grid: {drawOnChartArea: false} },
                        x: { min: 0, max: maxTime, title: {display: true, text: 'Temps (min)', font: {weight: 'bold'}} }
                    }
                }
            });
        }
        
        function drawTableGraph() {
            const depth = parseInt(document.getElementById('table-depth').value);
            const tableDepth = getTableDepth(depth);
            const searchTime = parseInt(document.getElementById('table-time').value);
            const searchRow = findBestRow(tableDepth, searchTime);
            
            const canvas = document.getElementById('chart2');
            const ctx = canvas.getContext('2d');
            if (charts[2]) charts[2].destroy();
            
            const relevantRows = mn90Tables.filter(r => r.prof === tableDepth).sort((a, b) => a.time - b.time);
            const remountRate = 10;
            
            let maxTotalTime = 0;
            relevantRows.forEach(row => {
                let totalTime = row.time;
                if (row.p15 > 0 || row.p12 > 0 || row.p9 > 0 || row.p6 > 0 || row.p3 > 0) {
                    let palierDepth = tableDepth;
                    if (row.p15 > 0) {
                        totalTime += (tableDepth - 15) / remountRate + row.p15;
                        palierDepth = 15;
                    }
                    if (row.p12 > 0) {
                        totalTime += Math.abs(palierDepth - 12) / remountRate + row.p12;
                        palierDepth = 12;
                    }
                    if (row.p9 > 0) {
                        totalTime += Math.abs(palierDepth - 9) / remountRate + row.p9;
                        palierDepth = 9;
                    }
                    if (row.p6 > 0) {
                        totalTime += Math.abs(palierDepth - 6) / remountRate + row.p6;
                        palierDepth = 6;
                    }
                    if (row.p3 > 0) {
                        totalTime += Math.abs(palierDepth - 3) / remountRate + row.p3;
                        palierDepth = 3;
                    }
                    totalTime += palierDepth / remountRate;
                } else {
                    totalTime += tableDepth / remountRate;
                }
                if (totalTime > maxTotalTime) maxTotalTime = totalTime;
            });
            
            const datasets = relevantRows.map((row, idx) => {
                let timePoints = [];
                let depthPoints = [];
                
                timePoints.push(0);
                depthPoints.push(tableDepth);
                
                timePoints.push(row.time);
                depthPoints.push(tableDepth);
                let t = row.time;
                let currentDepth = tableDepth;
                
                if (row.p15 > 0) {
                    const remount15Time = (tableDepth - 15) / remountRate;
                    for (let i = 1; i <= Math.ceil(remount15Time * 2); i++) {
                        const pct = i / Math.ceil(remount15Time * 2);
                        timePoints.push(t + pct * remount15Time);
                        depthPoints.push(tableDepth - pct * (tableDepth - 15));
                    }
                    t += remount15Time + row.p15;
                    timePoints.push(t);
                    depthPoints.push(15);
                    currentDepth = 15;
                }
                
                if (row.p12 > 0) {
                    const remount12Time = Math.abs(currentDepth - 12) / remountRate;
                    for (let i = 1; i <= Math.ceil(remount12Time * 2); i++) {
                        const pct = i / Math.ceil(remount12Time * 2);
                        timePoints.push(t + pct * remount12Time);
                        depthPoints.push(currentDepth - pct * (currentDepth - 12));
                    }
                    t += remount12Time + row.p12;
                    timePoints.push(t);
                    depthPoints.push(12);
                    currentDepth = 12;
                }
                
                if (row.p9 > 0) {
                    const remount9Time = Math.abs(currentDepth - 9) / remountRate;
                    for (let i = 1; i <= Math.ceil(remount9Time * 2); i++) {
                        const pct = i / Math.ceil(remount9Time * 2);
                        timePoints.push(t + pct * remount9Time);
                        depthPoints.push(currentDepth - pct * (currentDepth - 9));
                    }
                    t += remount9Time + row.p9;
                    timePoints.push(t);
                    depthPoints.push(9);
                    currentDepth = 9;
                }
                
                if (row.p6 > 0) {
                    const remount6Time = Math.abs(currentDepth - 6) / remountRate;
                    for (let i = 1; i <= Math.ceil(remount6Time * 2); i++) {
                        const pct = i / Math.ceil(remount6Time * 2);
                        timePoints.push(t + pct * remount6Time);
                        depthPoints.push(currentDepth - pct * (currentDepth - 6));
                    }
                    t += remount6Time + row.p6;
                    timePoints.push(t);
                    depthPoints.push(6);
                    currentDepth = 6;
                }
                
                if (row.p3 > 0) {
                    const remount3Time = Math.abs(currentDepth - 3) / remountRate;
                    for (let i = 1; i <= Math.ceil(remount3Time * 2); i++) {
                        const pct = i / Math.ceil(remount3Time * 2);
                        timePoints.push(t + pct * remount3Time);
                        depthPoints.push(currentDepth - pct * (currentDepth - 3));
                    }
                    t += remount3Time + row.p3;
                    timePoints.push(t);
                    depthPoints.push(3);
                    currentDepth = 3;
                }
                
                if (currentDepth > 0) {
                    const remount0Time = currentDepth / remountRate;
                    for (let i = 1; i <= Math.ceil(remount0Time * 2); i++) {
                        const pct = i / Math.ceil(remount0Time * 2);
                        timePoints.push(t + pct * remount0Time);
                        depthPoints.push(currentDepth - pct * currentDepth);
                    }
                }
                
                const isHighlighted = Math.abs(row.time - searchRow.time) < 0.5 && row.prof === searchRow.prof;
                
                return {
                    label: `${formatTime(row.time)} - ${row.gps}`,
                    data: depthPoints.map((d, i) => ({x: timePoints[i], y: d})),
                    borderColor: isHighlighted ? '#f39c12' : colors[idx % colors.length],
                    backgroundColor: 'rgba(0,0,0,0)',
                    borderWidth: isHighlighted ? 3 : 2,
                    borderDash: isHighlighted ? [] : [5, 5],
                    tension: 0,
                    fill: false,
                    pointRadius: isHighlighted ? 5 : 0,
                    pointBackgroundColor: isHighlighted ? '#f39c12' : colors[idx % colors.length],
                    spanGaps: true,
                    showLine: true
                };
            });
            
            charts[2] = new Chart(ctx, {
                type: 'scatter',
                data: { datasets: datasets },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { 
                        legend: { 
                            display: true, 
                            position: 'right', 
                            labels: { 
                                font: {size: 9}, 
                                padding: 6, 
                                maxWidth: 120
                            } 
                        } 
                    },
                    scales: {
                        y: { 
                            reverse: true, 
                            max: tableDepth + 2, 
                            min: -1,
                            title: {display: true, text: 'Profondeur (m)', font: {weight: 'bold', size: 11}}, 
                            ticks: { font: {size: 10}, stepSize: 1 },
                            type: 'linear'
                        },
                        x: { 
                            title: {display: true, text: 'Temps (min)', font: {weight: 'bold', size: 11}}, 
                            ticks: { font: {size: 10} },
                            min: 0,
                            max: Math.ceil(maxTotalTime),
                            type: 'linear'
                        }
                    }
                }
            });
            
            let tableHtml = '';
            for (let row of relevantRows) {
                const isHighlighted = Math.abs(row.time - searchRow.time) < 0.5 && row.prof === searchRow.prof;
                const timeStr = formatTime(row.time);
                tableHtml += `<tr class="${isHighlighted ? 'highlight' : ''}">
                    <td><strong>${row.prof}m</strong></td>
                    <td><strong>${timeStr}</strong></td>
                    <td>${row.p15 || '-'}</td>
                    <td>${row.p12 || '-'}</td>
                    <td>${row.p9 || '-'}</td>
                    <td>${row.p6 || '-'}</td>
                    <td>${row.p3 || '-'}</td>
                    <td><strong>${row.gps}</strong></td>
                </tr>`;
            }
            
            const selectedRow = searchRow;
            const palierDetails = [];
            if (selectedRow.p15 > 0) palierDetails.push(`15m x${selectedRow.p15}'`);
            if (selectedRow.p12 > 0) palierDetails.push(`12m x${selectedRow.p12}'`);
            if (selectedRow.p9 > 0) palierDetails.push(`9m x${selectedRow.p9}'`);
            if (selectedRow.p6 > 0) palierDetails.push(`6m x${selectedRow.p6}'`);
            if (selectedRow.p3 > 0) palierDetails.push(`3m x${selectedRow.p3}'`);
            const palierText = palierDetails.length > 0 ? palierDetails.join(' + ') : 'aucun palier';
            
            tableHtml = `<tr><td colspan="8" style="background: #f0f8ff; border-left: 4px solid #3498db; padding: 10px; text-align: left; font-size: 10px;">
                <strong>üìã ${tableDepth}m pendant ${formatTime(selectedRow.time)}:</strong> Groupe ${selectedRow.gps} ‚Äì Palier: ${palierText}
            </td></tr>` + tableHtml;
            
            document.getElementById('table-rows').innerHTML = tableHtml;
        }
        
        function switchTab(n) {
            document.querySelectorAll('.workspace').forEach((el, i) => el.classList.toggle('active', i === n));
            document.querySelectorAll('.tab-btn').forEach((btn, i) => btn.classList.toggle('active', i === n));
            setTimeout(() => {
                if (n === 1) calculateTab1();
                if (n === 2) drawTableGraph();
                Object.values(charts).forEach(c => c && c.resize?.());
            }, 50);
        }
        
        setTimeout(() => {
            updateVal('table-time', '');
            updateVal('table-depth', ' m');
            calculateTab0();
            calculateTab1();
            drawTableGraph();
        }, 100);
    </script>
</body>
</html>